$carousel-duration: 9s;
$carousel-items: 3;
$slide-change-timing: 3;
$carousel-delay-fraction: calc($carousel-duration / $carousel-items);
$carousel-steps-fraction: calc(100 / $carousel-items);


@mixin animate($animation,$duration,$method,$times){
    animation: $animation $duration $method $times;
}

@mixin keyframes($name){
    @keyframes #{$name}{
        @content;
    }
}

@include keyframes(carousel-animate) {
	0% {
		visibility: hidden;
		opacity: 0;
		transform: translateX(200%) scale(0.7);
	}
	#{$slide-change-timing}%,
	#{$carousel-steps-fraction}% {
		visibility: visible;
		opacity: 0.8;
		transform: translateX(100%) scale(0.9);
	}
	#{$carousel-steps-fraction + $slide-change-timing}%,
	#{$carousel-steps-fraction * 2}% {
		visibility: visible;
		opacity: 1;
		transform: translateX(0) scale(1);
	}
	#{($carousel-steps-fraction * 2) + $slide-change-timing}%,
	#{$carousel-steps-fraction * 3}% {
		visibility: visible;
		opacity: 0.8;
		transform: translateX(-100%) scale(0.9);
	}
	#{($carousel-steps-fraction * 3) + $slide-change-timing}% {
		visibility: visible;
		opacity: 0;
		transform: translateX(-200%) scale(0.9);
	}
	100% {
		visibility: hidden;
		opacity: 0;
		transform: translateX(-200%) scale(0.7);
	}
}

.carousel-container {
    margin-left: calc(-50vw + 50%); 
    padding:0;
	--container-padding-horizontal: 32px;
	position: relative;
	padding-inline: var(--container-padding-horizontal);
	display: grid;
	place-items: center;
    width: 50%;
}

.carousel {
	pointer-events: none;
	position: absolute;
    padding-block-start: 67px;
	padding-block-end: max(24px, calc(29px + var(--font-size-md)));
	perspective: 100px;
	width: 100%;
	&__wrapper {
		position: relative;
		display: flex;
		justify-content: center;
		height: 61.2vh;
	}
	.item {
		position: absolute;
		width: 100%;
		height: auto;
		margin-inline: 32px;
		opacity: 0;
		will-change: transform, opacity;
		@include animate (carousel-animate, $carousel-duration, ease-in-out, infinite);
        @media (max-width: 568px) {
			margin-inline: calc(var(--container-padding-horizontal) + 1px);
		}
		@for $i from 1 through ($carousel-items - 1) {
			&:nth-child(#{$i}) {
				animation-delay: calc(#{$carousel-delay-fraction} * #{$i - 2});
			}
		}
		&:last-child {
			animation-delay: calc(-#{$carousel-delay-fraction} * 2);
		}
	}
	img {
		max-width: 100%;
		object-fit: cover;
		height: 100%;
	}
}
	
